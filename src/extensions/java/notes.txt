javac HelloWorld.java
javah -jni HelloWorld
gcc HelloWorld.c -fPIC -shared -o libHelloWorld.so
setenv LD_LIBRARY_PATH .
java HelloWorld


pointer - use long in java

pass string array to function

void MyJNIFunction(JNIEnv *env, jobject object, jobjectarray stringArray) {

    int stringCount = GetArrayLength(env, stringArray);

    for (int i=0; i<stringCount; i++) {
        jstring string = (jstring) GetObjectArrayElement(env, stringArray, i);
        const char *rawString = GetStringUTFChars(env, string, 0);
        // Don't forget to call `ReleaseStringUTFChars` when you're done.
    }
}

return string array

   
  JNIEXPORT jobjectArray JNICALL   
               Java_ArrayHandler_returnArray  
  (JNIEnv *env, jobject jobj){  
   
    jobjectArray ret;  
    int i;  
   
    char *message[5]= {"first",   
"second",   
"third",   
"fourth",   
"fifth"};  
   
    ret= (jobjectArray)env->NewObjectArray(5,  
         env->FindClass("java/lang/String"),  
         env->NewStringUTF(""));  
   
    for(i=0;i<5;i++) {  
        env->SetObjectArrayElement(  
ret,i,env->NewStringUTF(message[i]));  
    }  
    return(ret);  
  }  


java finalize() for garbage collection

Pair in java - not exist, gotta make own?


